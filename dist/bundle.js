/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){var t,r,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(e,o,i,a){var c=o&&o.prototype instanceof u?o:u,l=Object.create(c.prototype);return n(l,"_invoke",function(e,n,o){var i,a,c,u=0,l=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,a=0,c=t,p.n=n,s}};function f(e,n){for(a=e,c=n,r=0;!d&&u&&!o&&r<l.length;r++){var o,i=l[r],f=p.p,v=i[2];e>3?(o=v===n)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=e<2&&f<i[1])?(a=0,p.v=n,p.n=i[1]):f<v&&(o=e<3||i[0]>n||n>v)&&(i[4]=e,i[5]=n,p.n=v,a=0))}if(o||e>1)return s;throw d=!0,n}return function(o,l,v){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,v),a=l,c=v;(r=a<2?t:c)||!d;){i||(a?a<3?(a>1&&(p.n=-1),f(a,c)):p.n=c:p.v=c);try{if(u=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((r=(d=p.n<0)?c:e.call(n,p))!==s)break}catch(e){i=t,a=1,c=e}finally{u=1}}return{value:r,done:d}}}(e,i,a),!0),l}var s={};function u(){}function l(){}function d(){}r=Object.getPrototypeOf;var p=[][i]?r(r([][i]())):(n(r={},i,(function(){return this})),r),f=d.prototype=u.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,n(t,a,"GeneratorFunction")),t.prototype=Object.create(f),t}return l.prototype=d,n(f,"constructor",d),n(d,"constructor",l),l.displayName="GeneratorFunction",n(d,a,"GeneratorFunction"),n(f),n(f,a,"Generator"),n(f,i,(function(){return this})),n(f,"toString",(function(){return"[object Generator]"})),(e=function(){return{w:c,m:v}})()}function n(t,e,r,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}n=function(t,e,r,o){if(e)i?i(t,e,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[e]=r;else{var a=function(e,r){n(t,e,(function(t){return this._invoke(e,r,t)}))};a("next",0),a("throw",1),a("return",2)}},n(t,e,r,o)}function r(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function c(t){r(a,o,i,c,s,"next",t)}function s(t){r(a,o,i,c,s,"throw",t)}c(void 0)}))}}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var c=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.products=[]},n=[{key:"fetchProducts",value:(c=o(e().m((function t(){var n,r;return e().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch("http://localhost:3001/api/products");case 1:return n=t.v,t.n=2,n.json();case 2:return this.products=t.v,t.a(2,this.products);case 3:return t.p=3,r=t.v,console.error("Ошибка при загрузке продуктов:",r),t.a(2,[])}}),t,this,[[0,3]])}))),function(){return c.apply(this,arguments)})},{key:"deleteProduct",value:(a=o(e().m((function t(n){var r;return e().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch("http://localhost:3001/api/products/".concat(n),{method:"DELETE"});case 1:t.v.ok&&(this.products=this.products.filter((function(t){return t.id!==n})),this.render()),t.n=3;break;case 2:t.p=2,r=t.v,console.error("Ошибка при удалении продукта:",r);case 3:return t.a(2)}}),t,this,[[0,2]])}))),function(t){return a.apply(this,arguments)})},{key:"filterProducts",value:function(t){return this.products.filter((function(e){var n;return e.name.toLowerCase().includes(t.toLowerCase())||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase()))}))}},{key:"createCarousel",value:function(){var t=document.createElement("div");t.className="carousel slide mb-4 shadow rounded",t.id="productCarousel",t.setAttribute("data-bs-ride","carousel"),t.setAttribute("data-bs-interval","3000");var e=document.createElement("div");e.className="carousel-indicators";var n=document.createElement("div");n.className="carousel-inner",this.products.forEach((function(t,r){var o=document.createElement("button");o.setAttribute("type","button"),o.setAttribute("data-bs-target","#productCarousel"),o.setAttribute("data-bs-slide-to",r.toString()),o.setAttribute("aria-label","Slide ".concat(r+1)),0===r&&(o.className="active",o.setAttribute("aria-current","true")),e.appendChild(o);var i=document.createElement("div");i.className="carousel-item ".concat(0===r?"active":"");var a=document.createElement("div");a.className="position-relative mx-auto",a.style.height="400px",a.style.maxWidth="800px";var c=document.createElement("img");c.src=t.image||"https://via.placeholder.com/800x400",c.className="w-100 h-100",c.style.objectFit="cover",c.style.borderRadius="8px",c.alt=t.name;var s=document.createElement("div");s.className="position-absolute bottom-0 w-100 p-4",s.style.background="linear-gradient(transparent, rgba(0,0,0,0.8))",s.style.borderRadius="0 0 8px 8px";var u=document.createElement("h2");u.className="text-white mb-0",u.textContent=t.name,s.appendChild(u),a.appendChild(c),a.appendChild(s);var l=document.createElement("a");l.href="#product/".concat(t.id),l.style.textDecoration="none",l.appendChild(a),i.appendChild(l),n.appendChild(i)}));var r=document.createElement("button");r.className="carousel-control-prev",r.setAttribute("type","button"),r.setAttribute("data-bs-target","#productCarousel"),r.setAttribute("data-bs-slide","prev"),r.innerHTML='\n            <span class="carousel-control-prev-icon" aria-hidden="true"></span>\n            <span class="visually-hidden">Previous</span>\n        ';var o=document.createElement("button");return o.className="carousel-control-next",o.setAttribute("type","button"),o.setAttribute("data-bs-target","#productCarousel"),o.setAttribute("data-bs-slide","next"),o.innerHTML='\n            <span class="carousel-control-next-icon" aria-hidden="true"></span>\n            <span class="visually-hidden">Next</span>\n        ',t.appendChild(e),t.appendChild(n),t.appendChild(r),t.appendChild(o),t}},{key:"render",value:(r=o(e().m((function t(){var n,r,o,i,a,c=this;return e().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchProducts();case 1:(n=document.getElementById("app")).innerHTML="",(r=document.createElement("div")).className="mb-4 card shadow p-3",r.innerHTML='\n            <div class="row align-items-center">\n                <div class="col">\n                    <div class="input-group">\n                        <span class="input-group-text"><i class="bi bi-search"></i></span>\n                        <input type="text" class="form-control" id="searchInput" placeholder="Поиск продуктов...">\n                    </div>\n                </div>\n                <div class="col-auto">\n                    <button class="btn btn-success" id="addProductBtn">\n                        <i class="bi bi-plus-circle me-1"></i> Добавить продукт\n                    </button>\n                </div>\n            </div>\n        ',n.appendChild(r),n.appendChild(this.createCarousel()),(o=document.createElement("div")).className="card shadow p-3 mt-4",(i=document.createElement("h3")).className="mb-3 card-title",i.innerHTML='<i class="bi bi-grid me-2"></i>Все продукты',o.appendChild(i),(a=document.createElement("div")).className="row row-cols-1 row-cols-md-3 g-4",o.appendChild(a),n.appendChild(o),document.getElementById("searchInput").addEventListener("input",(function(t){var e=c.filterProducts(t.target.value);c.renderProducts(e)})),document.getElementById("addProductBtn").addEventListener("click",(function(){window.location.hash="#edit"})),this.renderProducts(this.products);case 2:return t.a(2)}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"renderProducts",value:function(t){var e=this,n=document.querySelector(".row-cols-md-3");if(n.innerHTML="",0===t.length){var r=document.createElement("div");return r.className="col-12 text-center py-5",r.innerHTML='\n                <i class="bi bi-search text-muted" style="font-size: 3rem;"></i>\n                <p class="mt-3 text-muted">Продукты не найдены</p>\n            ',void n.appendChild(r)}t.forEach((function(t){var r=document.createElement("div");r.className="col",r.appendChild(function(t){var n=document.createElement("div");return n.className="card h-100 shadow-sm",n.style.width="18rem",n.innerHTML='\n        <img src="'.concat(t.image,'" class="card-img-top" alt="').concat(t.name,'" style="height: 200px; object-fit: cover;">\n        <div class="card-body d-flex flex-column">\n            <h5 class="card-title">').concat(t.name,'</h5>\n            <p class="card-text flex-grow-1">').concat(t.description||"",'</p>\n            <p class="card-text"><strong>Цена: $').concat(t.price,'</strong></p>\n            <div class="d-flex gap-2 mt-2">\n                <button class="btn btn-sm btn-primary flex-grow-1 details-btn" data-product-id="').concat(t.id,'">\n                    <i class="bi bi-info-circle me-1"></i> Детали\n                </button>\n                <button class="btn btn-sm btn-warning flex-grow-1 edit-btn">\n                    <i class="bi bi-pencil me-1"></i> Изменить\n                </button>\n                <button class="btn btn-sm btn-danger flex-grow-1 delete-btn">\n                    <i class="bi bi-trash me-1"></i> Удалить\n                </button>\n            </div>\n        </div>\n    '),n.querySelector(".delete-btn").addEventListener("click",(function(){return n=t.id,e.deleteProduct(n);var n})),n.querySelector(".details-btn").addEventListener("click",(function(){window.location.hash="#product/".concat(t.id)})),n.querySelector(".edit-btn").addEventListener("click",(function(){window.location.hash="#edit/".concat(t.id)})),n}(t)),n.appendChild(r)}))}}],n&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,a,c}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return l(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,c=0,s=t,p.n=n,a}};function f(n,r){for(c=n,s=r,e=0;!d&&u&&!o&&e<l.length;e++){var o,i=l[e],f=p.p,v=i[2];n>3?(o=v===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(c=0,p.v=r,p.n=i[1]):f<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,v){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,v),c=l,s=v;(e=c<2?t:s)||!d;){i||(c?c<3?(c>1&&(p.n=-1),f(c,s)):p.n=s:p.v=s);try{if(u=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,c=1,s=e}finally{u=1}}return{value:e,done:d}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function d(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(l(e={},r,(function(){return this})),e),f=d.prototype=c.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=d,l(f,"constructor",d),l(d,"constructor",s),s.displayName="GeneratorFunction",l(d,o,"GeneratorFunction"),l(f),l(f,o,"Generator"),l(f,r,(function(){return this})),l(f,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:i,m:v}})()}function l(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}l=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){l(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},l(t,e,n,r)}function d(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){d(i,r,o,a,c,"next",t)}function c(t){d(i,r,o,a,c,"throw",t)}a(void 0)}))}}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function v(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}var m=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.product=null},e=[{key:"fetchProduct",value:(r=p(u().m((function t(e){var n,r;return u().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch("http://localhost:3001/api/products/".concat(e));case 1:if((n=t.v).ok){t.n=2;break}throw new Error("Продукт не найден");case 2:return t.n=3,n.json();case 3:this.product=t.v,t.n=5;break;case 4:t.p=4,r=t.v,console.error("Ошибка при получении продукта:",r),this.product=null;case 5:return t.a(2)}}),t,this,[[0,4]])}))),function(t){return r.apply(this,arguments)})},{key:"render",value:(n=p(u().m((function t(e){var n;return u().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchProduct(e);case 1:if(n=document.getElementById("app"),this.product){t.n=2;break}return n.innerHTML='\n                <div class="alert alert-danger" role="alert">\n                    Продукт не найден!\n                </div>\n            ',t.a(2);case 2:n.innerHTML='\n            <div class="card shadow">\n                <div class="row g-0">\n                    <div class="col-md-4">\n                        <img src="'.concat(this.product.image||"https://via.placeholder.com/400x300",'" \n                             class="img-fluid rounded-start" \n                             alt="').concat(this.product.name,'"\n                             style="height: 300px; width: 100%; object-fit: cover;">\n                    </div>\n                    <div class="col-md-8">\n                        <div class="card-body">\n                            <h2 class="card-title">').concat(this.product.name,'</h2>\n                            <p class="card-text">').concat(this.product.description||this.product.category,'</p>\n                            <p class="card-text"><small class="text-muted">').concat(this.product.details||"Дополнительная информация отсутствует",'</small></p>\n                            <p class="card-text"><strong>Цена: $').concat(this.product.price,'</strong></p>\n                            <div class="btn-group" role="group">\n                                <button class="btn btn-primary" id="backButton">\n                                    <i class="bi bi-arrow-left me-1"></i> Назад\n                                </button>\n                                <button class="btn btn-warning" id="editButton">\n                                    <i class="bi bi-pencil me-1"></i> Редактировать\n                                </button>\n                                <button class="btn btn-info text-white" id="specsButton">\n                                    <i class="bi bi-list-check me-1"></i> Характеристики\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '),document.getElementById("backButton").addEventListener("click",(function(){window.location.hash=""})),document.getElementById("editButton").addEventListener("click",(function(){window.location.hash="#edit/".concat(e)})),document.getElementById("specsButton").addEventListener("click",(function(){window.location.hash="#specifications/".concat(e)}));case 3:return t.a(2)}}),t,this)}))),function(t){return n.apply(this,arguments)})}],e&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function g(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return w(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,c=0,s=t,p.n=n,a}};function f(n,r){for(c=n,s=r,e=0;!d&&u&&!o&&e<l.length;e++){var o,i=l[e],f=p.p,v=i[2];n>3?(o=v===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(c=0,p.v=r,p.n=i[1]):f<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,v){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,v),c=l,s=v;(e=c<2?t:s)||!d;){i||(c?c<3?(c>1&&(p.n=-1),f(c,s)):p.n=s:p.v=s);try{if(u=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,c=1,s=e}finally{u=1}}return{value:e,done:d}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(w(e={},r,(function(){return this})),e),d=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,w(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=u,w(d,"constructor",u),w(u,"constructor",s),s.displayName="GeneratorFunction",w(u,o,"GeneratorFunction"),w(d),w(d,o,"Generator"),w(d,r,(function(){return this})),w(d,"toString",(function(){return"[object Generator]"})),(g=function(){return{w:i,m:p}})()}function w(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}w=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){w(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},w(t,e,n,r)}function P(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function E(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){P(i,r,o,a,c,"next",t)}function c(t){P(i,r,o,a,c,"throw",t)}a(void 0)}))}}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function S(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}var j=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.product=null},e=[{key:"fetchProduct",value:(r=E(g().m((function t(e){var n,r;return g().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch("http://localhost:3001/api/products/".concat(e));case 1:if((n=t.v).ok){t.n=2;break}throw new Error("Product not found");case 2:return t.n=3,n.json();case 3:this.product=t.v,t.n=5;break;case 4:t.p=4,r=t.v,console.error("Error fetching product:",r),this.product=null;case 5:return t.a(2)}}),t,this,[[0,4]])}))),function(t){return r.apply(this,arguments)})},{key:"generateSpecifications",value:function(t){var e={};return"Electronics"===t.category||"Audio"===t.category?(e={name:t.name,price:"$".concat(t.price),category:t.category,description:t.description||"Not specified",details:t.details||"Not specified"},t.name.includes("MacBook")||t.name.includes("Laptop")?(e.processor="Apple M2 Pro/Max",e.ram="Up to 96GB unified memory",e.storage="Up to 8TB SSD",e.display="14.2-inch or 16.2-inch Liquid Retina XDR display",e.battery="Up to 22 hours"):t.name.includes("iPhone")||t.name.includes("Phone")?(e.processor="A16 Bionic chip",e.ram="6GB",e.storage="128GB/256GB/512GB",e.display="6.1-inch Super Retina XDR OLED",e.battery="3349 mAh",e.camera="48MP main + 12MP ultra-wide"):(t.name.includes("Audio-Technica")||t.name.includes("Headphones"))&&(e.type="Closed-back dynamic",e.driver="45mm",e.frequency="15-28,000 Hz",e.impedance="38 ohms",e.sensitivity="98 dB")):e={name:t.name,price:"$".concat(t.price),category:t.category,description:t.description||"Not specified"},e}},{key:"render",value:(n=E(g().m((function t(e){var n,r,o;return g().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchProduct(e);case 1:if(n=document.getElementById("app"),this.product){t.n=2;break}return n.innerHTML='\n                <div class="alert alert-danger" role="alert">\n                    Product specifications not found!\n                </div>\n            ',t.a(2);case 2:r=this.generateSpecifications(this.product),o=Object.entries(r).map((function(t){var e=h(t,2),n=e[0],r=e[1];return Array.isArray(r)?'\n                        <div class="row mb-2">\n                            <div class="col-4 fw-bold text-capitalize">'.concat(n,':</div>\n                            <div class="col-8">').concat(r.join(", "),"</div>\n                        </div>\n                    "):'\n                    <div class="row mb-2">\n                        <div class="col-4 fw-bold text-capitalize">'.concat(n,':</div>\n                        <div class="col-8">').concat(r,"</div>\n                    </div>\n                ")})).join(""),n.innerHTML='\n            <div class="card">\n                <div class="card-header bg-primary text-white">\n                    <h2 class="mb-0">'.concat(this.product.name,' - Technical Specifications</h2>\n                </div>\n                <div class="card-body">\n                    ').concat(o,'\n                </div>\n                <div class="card-footer">\n                    <button class="btn btn-secondary" id="backButton">Back to Product</button>\n                </div>\n            </div>\n        '),document.getElementById("backButton").addEventListener("click",(function(){window.location.hash="#product/".concat(e)}));case 3:return t.a(2)}}),t,this)}))),function(t){return n.apply(this,arguments)})}],e&&k(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function O(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return T(u,"_invoke",function(n,r,o){var i,c,s,u=0,l=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,c=0,s=t,p.n=n,a}};function f(n,r){for(c=n,s=r,e=0;!d&&u&&!o&&e<l.length;e++){var o,i=l[e],f=p.p,v=i[2];n>3?(o=v===r)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(c=0,p.v=r,p.n=i[1]):f<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,v){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,v),c=l,s=v;(e=c<2?t:s)||!d;){i||(c?c<3?(c>1&&(p.n=-1),f(c,s)):p.n=s:p.v=s);try{if(u=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,c=1,s=e}finally{u=1}}return{value:e,done:d}}}(n,o,i),!0),u}var a={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(T(e={},r,(function(){return this})),e),d=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,T(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=u,T(d,"constructor",u),T(u,"constructor",s),s.displayName="GeneratorFunction",T(u,o,"GeneratorFunction"),T(d),T(d,o,"Generator"),T(d,r,(function(){return this})),T(d,"toString",(function(){return"[object Generator]"})),(O=function(){return{w:i,m:p}})()}function T(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}T=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){T(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},T(t,e,n,r)}function C(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function B(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){C(i,r,o,a,c,"next",t)}function c(t){C(i,r,o,a,c,"throw",t)}a(void 0)}))}}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N(r.key),r)}}function N(t){var e=function(t){if("object"!=x(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:e+""}var G=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.product=null,this.isNewProduct=!0},e=[{key:"fetchProduct",value:(o=B(O().m((function t(e){var n,r;return O().w((function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return this.isNewProduct=!0,this.product={name:"",price:"",category:"",description:"",image:"",details:""},t.a(2);case 1:return t.p=1,t.n=2,fetch("http://localhost:3001/api/products/".concat(e));case 2:if((n=t.v).ok){t.n=3;break}throw new Error("Продукт не найден");case 3:return t.n=4,n.json();case 4:this.product=t.v,this.isNewProduct=!1,t.n=6;break;case 5:t.p=5,r=t.v,console.error("Ошибка при получении продукта:",r),this.product=null;case 6:return t.a(2)}}),t,this,[[1,5]])}))),function(t){return o.apply(this,arguments)})},{key:"saveProduct",value:(r=B(O().m((function t(){var e,n,r,o,i,a,c;return O().w((function(t){for(;;)switch(t.n){case 0:if((e=document.getElementById("productForm")).checkValidity()){t.n=1;break}return e.reportValidity(),t.a(2);case 1:return n=new FormData(e),r={name:n.get("name"),price:parseFloat(n.get("price")),category:n.get("category"),description:n.get("description"),image:n.get("image"),details:n.get("details")},t.p=2,o="http://localhost:3001/api/products",i="POST",this.isNewProduct||(o="".concat(o,"/").concat(this.product.id),i="PUT"),t.n=3,fetch(o,{method:i,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:if(!t.v.ok){t.n=4;break}window.location.hash="",t.n=5;break;case 4:throw new Error("Ошибка при сохранении продукта");case 5:t.n=7;break;case 6:t.p=6,c=t.v,console.error("Ошибка при сохранении:",c),(a=document.getElementById("errorAlert")).textContent="Ошибка: ".concat(c.message),a.classList.remove("d-none");case 7:return t.a(2)}}),t,this,[[2,6]])}))),function(){return r.apply(this,arguments)})},{key:"render",value:(n=B(O().m((function t(e){var n,r,o,i,a,c,s,u,l,d,p=this;return O().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchProduct(e);case 1:document.getElementById("app").innerHTML='\n            <div class="container">\n                <div class="card shadow">\n                    <div class="card-header bg-primary text-white">\n                        <h2 class="mb-0">\n                            <i class="bi '.concat(this.isNewProduct?"bi-plus-circle":"bi-pencil-square",' me-2"></i>\n                            ').concat(this.isNewProduct?"Добавление нового продукта":"Редактирование продукта",'\n                        </h2>\n                    </div>\n                    <div class="card-body">\n                        <div class="alert alert-danger d-none" id="errorAlert" role="alert"></div>\n                        \n                        <form id="productForm" class="needs-validation" novalidate>\n                            <div class="mb-3">\n                                <label for="name" class="form-label">Название</label>\n                                <input type="text" class="form-control" id="name" name="name" value="').concat((null===(n=this.product)||void 0===n?void 0:n.name)||"",'" required>\n                                <div class="invalid-feedback">Пожалуйста, введите название продукта</div>\n                            </div>\n                            \n                            <div class="mb-3">\n                                <label for="price" class="form-label">Цена</label>\n                                <div class="input-group">\n                                    <span class="input-group-text">$</span>\n                                    <input type="number" class="form-control" id="price" name="price" step="0.01" min="0" value="').concat((null===(r=this.product)||void 0===r?void 0:r.price)||"",'" required>\n                                    <div class="invalid-feedback">Пожалуйста, введите корректную цену</div>\n                                </div>\n                            </div>\n                            \n                            <div class="mb-3">\n                                <label for="category" class="form-label">Категория</label>\n                                <select class="form-select" id="category" name="category" required>\n                                    <option value="" ').concat(null!==(o=this.product)&&void 0!==o&&o.category?"":"selected",'>Выберите категорию...</option>\n                                    <option value="Electronics" ').concat("Electronics"===(null===(i=this.product)||void 0===i?void 0:i.category)?"selected":"",'>Электроника</option>\n                                    <option value="Audio" ').concat("Audio"===(null===(a=this.product)||void 0===a?void 0:a.category)?"selected":"",'>Аудио</option>\n                                    <option value="Gaming" ').concat("Gaming"===(null===(c=this.product)||void 0===c?void 0:c.category)?"selected":"",'>Игры</option>\n                                    <option value="Computers" ').concat("Computers"===(null===(s=this.product)||void 0===s?void 0:s.category)?"selected":"",'>Компьютеры</option>\n                                </select>\n                                <div class="invalid-feedback">Пожалуйста, выберите категорию</div>\n                            </div>\n                            \n                            <div class="mb-3">\n                                <label for="description" class="form-label">Описание</label>\n                                <textarea class="form-control" id="description" name="description" rows="3">').concat((null===(u=this.product)||void 0===u?void 0:u.description)||"",'</textarea>\n                            </div>\n                            \n                            <div class="mb-3">\n                                <label for="image" class="form-label">URL изображения</label>\n                                <input type="text" class="form-control" id="image" name="image" value="').concat((null===(l=this.product)||void 0===l?void 0:l.image)||"",'">\n                                <div class="form-text">Оставьте пустым для изображения по умолчанию</div>\n                            </div>\n                            \n                            <div class="mb-3">\n                                <label for="details" class="form-label">Детали</label>\n                                <textarea class="form-control" id="details" name="details" rows="3">').concat((null===(d=this.product)||void 0===d?void 0:d.details)||"",'</textarea>\n                            </div>\n                            \n                            <div class="d-flex gap-2">\n                                <button type="button" class="btn btn-primary" id="saveButton">\n                                    <i class="bi bi-save me-1"></i> Сохранить\n                                </button>\n                                <button type="button" class="btn btn-secondary" id="cancelButton">\n                                    <i class="bi bi-x-circle me-1"></i> Отмена\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        '),document.getElementById("saveButton").addEventListener("click",(function(){return p.saveProduct()})),document.getElementById("cancelButton").addEventListener("click",(function(){window.location.hash=""}));case 2:return t.a(2)}}),t,this)}))),function(t){return n.apply(this,arguments)})}],e&&L(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function I(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}var M=function(){return t=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mainPage=new c,this.productPage=new m,this.specificationsPage=new j,this.editProductPage=new G,this.handleRoute(),window.addEventListener("hashchange",(function(){return e.handleRoute()})),document.getElementById("homeButton").addEventListener("click",(function(){window.location.hash=""}))},(e=[{key:"handleRoute",value:function(){var t=window.location.hash;if(t.startsWith("#specifications/")){var e=t.split("/")[1];this.specificationsPage.render(e)}else if(t.startsWith("#product/")){var n=t.split("/")[1];this.productPage.render(n)}else if(t.startsWith("#edit/")){var r=t.split("/")[1];this.editProductPage.render(r)}else"#edit"===t?this.editProductPage.render():this.mainPage.render()}}])&&_(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();document.addEventListener("DOMContentLoaded",(function(){new M}))})();